<!DOCTYPE html>
<html>

<head>
    <title>Webslesson Tutorial | Search HTML Table Data by using JQuery</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" /> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous">


    <style>
        #result {
   position: absolute;
   width: 100%;
   max-width:870px;
   cursor: pointer;
   overflow-y: auto;
   max-height: 400px;
   box-sizing: border-box;
   z-index: 1001;
  }
  .link-class:hover{
   background-color:#f1f1f1;
  }
  </style>
</head>

<body>
    <br /><br />
    <div class="container" style="width:900px;">
        <h2 align="center">JSON Live Data Search using Ajax JQuery</h2>
        <h3 align="center">Employee Data</h3>
        <br /><br />
        <div align="center">

            <!-- <input type="text" name="search" id="search" placeholder="Search Employee Details" class="form-control" /> -->

        </div>
        <div class="input-group mb-3">
            <input type="hidden" id="kode" name="kode">
            <input type="text" name="search" id="search" class="form-control" 
                placeholder="Nama pelanggan" 
                aria-label="Nama pelanggan"
                a ria-describedby="button-addon2"\>
            <div class="input-group-append">
                <a href='#' class="btn btn-success" type="button" id="button-addon2">Tambah Data</a>
            </div>
        </div>
 
        <ul class="list-group" id="result"></ul>
        <br />
    </div>

    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

</body>

</html>

<script>
    $(document).ready(function () {
        $.ajaxSetup({
            cache: false
        });
        $('#search').keyup(function () {
            $('#result').html('');
            $('#kode').val('');
            $("#result").show();
            $('#state').val('');
            var searchField = $('#search').val();
            var expression = new RegExp(searchField, "i");

            if (searchField === '') {
                $('#result').hide();
            } else {
                $('#result').show();
            }

            $.getJSON('pelanggan.json', function (data) {
                $.each(data, function (key, value) {
                    if (value.nama.search(expression) != -1 ||
                        value.alamat.search(expression) != -1 ||
                        value.telepon.search(expression) != -1) {
                        $('#result').append('<li class="list-group-item link-class"> ' +
                            value.id + ' | ' + value.nama + ' | ' + value.telepon +
                            ' | ' + value.alamat + '</li>');
                    }
                });
            });
        });

        $('#result').on('click', 'li', function () {
            var click_text = $(this).text().split('|');
            $('#search').val($.trim(click_text[1]));
            $('#kode').val($.trim(click_text[0]));
            $("#result").html('');
            $("#result").hide();
        });
    });
</script>